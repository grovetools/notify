{
  "sections": {
    "configuration": {
      "title": "Configuration",
      "content": "",
      "subsections": [
        {
          "title": "Notification Settings",
          "content": "This section outlines the configuration options available for the `notifications` extension. This extension allows the Grove ecosystem to dispatch alerts through various channels, such as the ntfy.sh service or native system notifications.\n\n| Property | Description |\n| :--- | :--- |\n| `ntfy` | (object, optional) \u003cbr\u003eConfiguration settings for the **ntfy** notification service. This allows you to send push notifications to mobile or desktop clients via topics. |\n| `system` | (object, optional) \u003cbr\u003eConfiguration settings for native desktop notifications (e.g., macOS Notification Center, Linux `notify-send`). |\n\n\n### Ntfy Configuration\n\nThese settings control the integration with the [ntfy.sh](https://ntfy.sh) service (or a self-hosted instance).\n\n| Property | Description |\n| :--- | :--- |\n| `enabled` | (boolean, required) \u003cbr\u003eMaster switch for the ntfy integration. When set to `true`, notifications will be dispatched to the configured server. |\n| `topic` | (string, required) \u003cbr\u003eThe specific topic name to publish notifications to. This serves as the channel identifier; any client subscribed to this topic will receive the alerts. |\n| `url` | (string, required) \u003cbr\u003eThe base URL of the ntfy server. Use `https://ntfy.sh` for the public service, or provide the URL of your self-hosted instance. |\n\n### System Configuration\n\nThese settings control how Grove tools interact with your operating system's native notification center.\n\n| Property | Description |\n| :--- | :--- |\n| `levels` | (array of strings, required) \u003cbr\u003eA list of severity levels that should trigger a desktop popup. Common values are \"info\", \"warning\", and \"error\". This allows you to filter out noise and only be alerted for significant events (e.g., only showing \"error\" messages). |",
          "code_blocks": [
            "[notifications.ntfy]\nenabled = true\ntopic = \"my-team-alerts\"\n\n[notifications.system]\nlevels = [\"error\", \"warning\"]"
          ]
        }
      ]
    },
    "overview": {
      "title": "Overview",
      "content": "`notify` is a command-line tool and Go library for dispatching local system alerts and remote push notifications. It abstracts operating system specifics and remote API details, providing a unified interface for signaling events within the Grove ecosystem.",
      "subsections": [
        {
          "title": "Core Mechanisms",
          "content": "**System Abstraction**: The tool detects the host operating system to execute the appropriate native command for desktop notifications:\n*   **macOS**: Executes `osascript` to trigger AppleScript notifications.\n*   **Linux**: Executes `notify-send` via `libnotify`.\n\n**Remote Dispatch**: Supports `ntfy` for sending push notifications to mobile devices or remote desktops. It constructs HTTP POST requests with support for priorities, tags, and titles, targeting either the public `ntfy.sh` service or self-hosted instances.\n\n**Configuration Integration**: Uses `grove core` to read configuration from `grove.yml`. Settings are defined under the `notifications` extension key, allowing project-specific or user-specific overrides for topics and filtering levels."
        },
        {
          "title": "Features",
          "content": "*   **`notify system`**: triggers a local desktop notification. Useful for signaling the completion of long-running shell scripts.\n*   **`notify ntfy`**: sends a payload to an ntfy topic. Supports flags for `--priority`, `--tags`, and `--title`."
        },
        {
          "title": "Integration with Grove Hooks",
          "content": "`notify` serves as the alerting layer for `grove hooks`.\n\n**Lifecycle Alerts**: When an interactive agent (managed by `flow` or `hooks`) changes state, `hooks` utilizes the `notify` package to alert the user.\n*   **Job Ready**: When a background job (e.g., `headless_agent`) completes or pauses for user input (`pending_user`), a notification is triggered.\n*   **Agent Idle**: When an interactive agent finishes a turn and awaits instructions, `notify` signals that the terminal requires attention.\n\n**Context Propagation**: Notifications sent via `hooks` include metadata derived from the session context, such as the Plan Name, Job Title, and Repository/Worktree, allowing users to distinguish between multiple concurrent agent sessions."
        },
        {
          "title": "Configuration",
          "content": "Configuration is managed via `grove.yml` under the `notifications` extension.",
          "code_blocks": [
            "extensions:\n  notifications:\n    ntfy:\n      enabled: true\n      topic: \"my-private-topic\"\n      url: \"https://ntfy.sh\" # Optional, defaults to official server\n    system:\n      levels: [\"error\", \"warning\"] # Only show system alerts for these levels"
          ]
        }
      ]
    }
  }
}